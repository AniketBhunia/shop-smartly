{"ast":null,"code":"import Swal from 'sweetalert2';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/Services/product.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"src/app/Services/review.service\";\nimport * as i4 from \"src/app/Services/shopping-cart.service\";\nimport * as i5 from \"@angular/common\";\nfunction ProductDetailedComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 20)(1, \"aside\", 21)(2, \"div\", 22)(3, \"a\", 23);\n    i0.ɵɵelement(4, \"img\", 24);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(5, \"main\", 21)(6, \"div\", 25)(7, \"h4\", 26);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"div\", 27)(10, \"div\", 28);\n    i0.ɵɵelement(11, \"i\", 29)(12, \"i\", 29)(13, \"i\", 29)(14, \"i\", 29)(15, \"i\", 30);\n    i0.ɵɵelementStart(16, \"span\", 31);\n    i0.ɵɵtext(17, \" 4.5 \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(18, \"span\", 32);\n    i0.ɵɵelement(19, \"i\", 33);\n    i0.ɵɵtext(20, \"154 orders\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"span\", 34);\n    i0.ɵɵtext(22);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(23, \"div\", 35)(24, \"span\");\n    i0.ɵɵelement(25, \"i\", 36);\n    i0.ɵɵelementStart(26, \"del\");\n    i0.ɵɵtext(27);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(28, \"b\");\n    i0.ɵɵtext(29);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(30, \"p\");\n    i0.ɵɵtext(31);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(32, \"hr\");\n    i0.ɵɵelementStart(33, \"div\", 37)(34, \"button\", 38);\n    i0.ɵɵlistener(\"click\", function ProductDetailedComponent_div_2_Template_button_click_34_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.addToCart());\n    });\n    i0.ɵɵtext(35, \"Add to cart\");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"src\", \"data:image/jpeg;base64,\" + ctx_r0.productData.product_image, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.productData.product_name, \" \");\n    i0.ɵɵadvance(14);\n    i0.ɵɵtextInterpolate(ctx_r0.productData.product_status);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"$\", ctx_r0.productData.product_current_price, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" $\", ctx_r0.productData.product_discount_price, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.productData.product_description, \" \");\n  }\n}\nfunction ProductDetailedComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 39)(1, \"div\", 40)(2, \"a\", 41);\n    i0.ɵɵelement(3, \"img\", 42);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 43)(5, \"a\", 44);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"strong\", 12)(8, \"span\");\n    i0.ɵɵelement(9, \"i\", 36);\n    i0.ɵɵelementStart(10, \"del\");\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"b\");\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd()()()()()();\n  }\n  if (rf & 2) {\n    const item_r6 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"src\", \"data:image/jpeg;base64,\" + item_r6.product_image, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"'/details/\", item_r6.product_id, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r6.product_name, \" \");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"$\", item_r6.product_current_price, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" $\", item_r6.product_discount_price, \"\");\n  }\n}\nfunction ProductDetailedComponent_div_21_i_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"i\");\n  }\n  if (rf & 2) {\n    const i_r10 = ctx.index;\n    const item_r7 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵclassMap(i_r10 + 1 <= item_r7.product_review_rating ? \"fa fa-star\" : \"fa fa-star-o\");\n  }\n}\nconst _c0 = function () {\n  return [1, 2, 3, 4, 5];\n};\nfunction ProductDetailedComponent_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 45)(1, \"div\", 46)(2, \"div\", 47)(3, \"p\")(4, \"b\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 48);\n    i0.ɵɵtemplate(7, ProductDetailedComponent_div_21_i_7_Template, 1, 2, \"i\", 49);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"p\", 50);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"p\", 51);\n    i0.ɵɵtext(11);\n    i0.ɵɵpipe(12, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(13, \"img\", 42);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const item_r7 = ctx.$implicit;\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"-\", item_r7.user_name, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpureFunction0(8, _c0));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r7.product_review_description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" Posted date: \", i0.ɵɵpipeBind2(12, 5, item_r7.posted_date, \"MMMM d, y\"), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", \"data:image/jpeg;base64,\" + item_r7.product_image, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction ProductDetailedComponent_li_27_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 17)(1, \"a\", 18);\n    i0.ɵɵlistener(\"click\", function ProductDetailedComponent_li_27_Template_a_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r14);\n      const page_r12 = restoredCtx.$implicit;\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.changePage(page_r12));\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \" \\u00A0\\u00A0\\u00A0\\u00A0\\u00A0\\u00A0\\u00A0\\u00A0\\u00A0\\u00A0 \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const page_r12 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"active\", page_r12 === ctx_r3.currentPage);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(page_r12);\n  }\n}\nexport class ProductDetailedComponent {\n  constructor(productService, activate, reviewService, shoppingCartService, router) {\n    this.productService = productService;\n    this.activate = activate;\n    this.reviewService = reviewService;\n    this.shoppingCartService = shoppingCartService;\n    this.router = router;\n    this.categoryValue = null;\n    this.items = [];\n    this.allPages = [];\n    this.INITIAL_PRODUCT_QUANTITY = 1;\n    // get review for productId\n    this.value = '';\n    this.reviewsPerPage = 4; // Number of reviews per page\n    this.currentPage = 1;\n    this.limitedItems = [];\n  }\n  ngOnInit() {\n    this.getAllReviewsAndLimitPages();\n    let productId = this.activate.snapshot.paramMap.get('productId');\n    this.getReviewByProductId(productId);\n    productId && this.productService.getProductByID(productId).subscribe(res => {\n      this.productData = res;\n      console.log(this.productData);\n      localStorage.setItem('localCart', JSON.stringify([this.productData]));\n    });\n    const productDataJson = localStorage.getItem('localCart');\n    if (productDataJson) {\n      const productData = JSON.parse(productDataJson);\n      this.categoryValue = productData[0].product_category;\n      console.log(this.categoryValue); // Output: Mobile\n    } else {\n      console.log('No product data found in local storage.');\n    }\n    this.productService.searchByCategory(this.categoryValue).subscribe(res => {\n      this.similarProducts = res;\n    });\n    // Reload the window after the specified delay\n  }\n\n  getAllReviewsAndLimitPages() {\n    this.reviewService.reviewList().subscribe(res => {\n      this.reviewLists = res.content;\n      console.log(this.reviewLists);\n      let pageNumbers = [];\n      for (let i = 1; i <= this.totalPages; i++) {\n        pageNumbers.push(i);\n      }\n      this.allPages = pageNumbers;\n    });\n  }\n  selectedValue(value) {\n    console.log('value', value);\n    this.value = value;\n  }\n  // Calculate the total number of pages\n  get totalPages() {\n    return Math.ceil(this.reviewData.length / this.reviewsPerPage);\n  }\n  // Get the array of reviews for the current page\n  get pagedReviews() {\n    const startIndex = (this.currentPage - 1) * this.reviewsPerPage;\n    const endIndex = startIndex + this.reviewsPerPage;\n    return this.reviewData.slice(startIndex, endIndex);\n  }\n  // Change the current page and update the displayed reviews\n  changePage(page) {\n    if (page >= 1 && page <= this.totalPages) {\n      this.currentPage = page;\n      this.limitedItems = this.pagedReviews;\n      console.log(this.pagedReviews, ' this is paged reviews');\n    }\n  }\n  getReviewByProductId(productId) {\n    this.reviewService.getReviewById(productId).subscribe(res => {\n      this.reviewData = res;\n      let newData = this.reviewData;\n      newData = this.pagedReviews;\n      this.limitedItems = this.pagedReviews;\n      console.log(this.limitedItems, ' limiteditems');\n    });\n  }\n  createReview() {\n    const data = {\n      productReview: {},\n      image: ''\n    };\n    // this.reviewService\n    //   .postReview(data.productReview, data.image)\n    //   .subscribe((res) => {\n    //     console.log(res);\n    //   });\n  }\n\n  addReview(data) {\n    console.log(data);\n    let newData = JSON.stringify(data);\n    console.log(newData);\n  }\n  // +++++++++++++++++++++++++++++++++++++++ Add to Cart\n  // Global initial value for product quantity\n  addToCart() {\n    const productDataJson = localStorage.getItem('localCart');\n    if (productDataJson) {\n      const productData = JSON.parse(productDataJson);\n      const existingCartDataJson = localStorage.getItem('cartList');\n      let cartData = []; // Explicitly define the type\n      if (existingCartDataJson) {\n        cartData = JSON.parse(existingCartDataJson); // Cast the parsed JSON to the expected type\n        const existingProductIndex = cartData.findIndex(item => item.productId === productData[0].product_id);\n        if (existingProductIndex !== -1) {\n          // Product already exists in the cart, increase the quantity\n          this.INITIAL_PRODUCT_QUANTITY += 1;\n        } else {\n          // Product doesn't exist in the cart, add it\n          const newCartItem = {\n            cartId: 21,\n            userId: 12,\n            productId: productData[0].product_id,\n            productName: productData[0].product_name,\n            cartTotalPrice: productData[0].product_discount_price,\n            productImage: productData[0].product_image,\n            productPrice: productData[0].product_discount_price,\n            productQuantity: this.INITIAL_PRODUCT_QUANTITY // Use the global initial value\n          };\n\n          cartData.push(newCartItem);\n          this.shoppingCartService.addToCart(newCartItem).subscribe(res => {\n            // Handle the response if needed\n          });\n        }\n      } else {\n        // Cart is empty, add the product directly\n        const newCartItem = {\n          cartId: 21,\n          userId: 12,\n          productId: productData[0].product_id,\n          productName: productData[0].product_name,\n          cartTotalPrice: productData[0].product_discount_price,\n          productImage: productData[0].product_image,\n          productPrice: productData[0].product_discount_price,\n          productQuantity: this.INITIAL_PRODUCT_QUANTITY // Use the global initial value\n        };\n\n        cartData.push(newCartItem);\n        this.shoppingCartService.addToCart(newCartItem).subscribe(res => {\n          // Handle the response if needed\n        });\n      }\n      localStorage.setItem('cartList', JSON.stringify(cartData));\n      Swal.fire({\n        title: 'Added In Your Cart',\n        text: 'Product Added in Your Cart',\n        icon: 'success',\n        confirmButtonText: 'Okay'\n      });\n      this.router.navigate(['/mycart']);\n    }\n  }\n}\nProductDetailedComponent.ɵfac = function ProductDetailedComponent_Factory(t) {\n  return new (t || ProductDetailedComponent)(i0.ɵɵdirectiveInject(i1.ProductService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.ReviewService), i0.ɵɵdirectiveInject(i4.ShoppingCartService), i0.ɵɵdirectiveInject(i2.Router));\n};\nProductDetailedComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProductDetailedComponent,\n  selectors: [[\"app-product-detailed\"]],\n  decls: 31,\n  vars: 8,\n  consts: [[1, \"py-5\"], [1, \"container\"], [\"class\", \"row gx-5\", 4, \"ngIf\"], [1, \"bg-light\", \"border-top\", \"py-4\"], [1, \"col-lg-12\"], [1, \"px-0\", \"border\", \"rounded-2\", \"shadow-0\"], [1, \"card\"], [1, \"card-body\"], [1, \"card-title\"], [1, \"row\"], [\"class\", \"col-md-6 mb-3\", 4, \"ngFor\", \"ngForOf\"], [1, \"bg-light\", \"py-4\"], [1, \"text-dark\"], [1, \"review\"], [\"class\", \"card mb-3\", 4, \"ngFor\", \"ngForOf\"], [\"aria-label\", \"Review pagination\"], [1, \"pagination\", \"justify-content-center\"], [1, \"page-item\"], [\"href\", \"javascript:void(0);\", 1, \"page-link\", 3, \"click\"], [\"class\", \"page-item\", 3, \"active\", 4, \"ngFor\", \"ngForOf\"], [1, \"row\", \"gx-5\"], [1, \"col-lg-6\"], [1, \"border\", \"rounded-4\", \"mb-3\", \"d-flex\", \"justify-content-center\"], [\"data-fslightbox\", \"mygalley\", \"target\", \"_blank\", \"data-type\", \"image\", \"href\", \"assets/images/pexels-pixabay-51383.jpg\", 1, \"rounded-4\"], [1, \"rounded-4\", \"fit\", 2, \"max-width\", \"100%\", \"max-height\", \"50vh\", \"margin\", \"auto\", 3, \"src\"], [1, \"ps-lg-3\"], [1, \"title\", \"text-dark\"], [1, \"d-flex\", \"flex-row\", \"my-3\"], [1, \"text-warning\", \"mb-1\", \"me-2\"], [1, \"fa\", \"fa-star\"], [1, \"fas\", \"fa-star-half-alt\"], [1, \"ms-1\"], [1, \"text-muted\"], [1, \"fas\", \"fa-shopping-basket\", \"fa-sm\", \"mx-1\"], [1, \"text-success\", \"ms-2\"], [1, \"mb-3\"], [1, \"fa\", \"fa-doller\"], [1, \"d-grid\", \"gap-2\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", 2, \"background-color\", \"#4682A9\", 3, \"click\"], [1, \"col-md-6\", \"mb-3\"], [1, \"d-flex\"], [\"href\", \"#\", 1, \"me-3\"], [1, \"img-md\", \"img-thumbnail\", 2, \"min-width\", \"96px\", \"height\", \"96px\", 3, \"src\"], [1, \"info\"], [1, \"nav-link\", \"mb-1\", 3, \"routerLink\"], [1, \"card\", \"mb-3\"], [1, \"card-body\", \"d-flex\", \"align-items-center\", \"justify-content-between\"], [1, \"review-text\"], [1, \"text-warning\", \"me-2\"], [3, \"class\", 4, \"ngFor\", \"ngForOf\"], [1, \"mb-0\"], [1, \"text-muted\", \"mb-0\"]],\n  template: function ProductDetailedComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"section\", 0)(1, \"div\", 1);\n      i0.ɵɵtemplate(2, ProductDetailedComponent_div_2_Template, 36, 6, \"div\", 2);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(3, \"section\", 3)(4, \"div\", 1)(5, \"div\", 4)(6, \"div\", 5)(7, \"div\", 6)(8, \"div\", 7)(9, \"h5\", 8);\n      i0.ɵɵtext(10, \"Similar items\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"div\", 9);\n      i0.ɵɵtemplate(12, ProductDetailedComponent_div_12_Template, 14, 5, \"div\", 10);\n      i0.ɵɵelementEnd()()()()()()();\n      i0.ɵɵelementStart(13, \"section\", 11)(14, \"div\", 1)(15, \"div\", 9)(16, \"div\", 4)(17, \"h2\", 12);\n      i0.ɵɵtext(18, \"Product Reviews\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(19, \"hr\");\n      i0.ɵɵelementStart(20, \"div\", 13);\n      i0.ɵɵtemplate(21, ProductDetailedComponent_div_21_Template, 14, 9, \"div\", 14);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(22, \"nav\", 15)(23, \"ul\", 16)(24, \"li\", 17)(25, \"a\", 18);\n      i0.ɵɵlistener(\"click\", function ProductDetailedComponent_Template_a_click_25_listener() {\n        return ctx.changePage(ctx.currentPage - 1);\n      });\n      i0.ɵɵtext(26, \"Previous\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(27, ProductDetailedComponent_li_27_Template, 4, 3, \"li\", 19);\n      i0.ɵɵelementStart(28, \"li\", 17)(29, \"a\", 18);\n      i0.ɵɵlistener(\"click\", function ProductDetailedComponent_Template_a_click_29_listener() {\n        return ctx.changePage(ctx.currentPage + 1);\n      });\n      i0.ɵɵtext(30, \"Next\");\n      i0.ɵɵelementEnd()()()()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.productData);\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"ngForOf\", ctx.similarProducts);\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngForOf\", ctx.limitedItems);\n      i0.ɵɵadvance(3);\n      i0.ɵɵclassProp(\"disabled\", ctx.currentPage === 1);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", ctx.allPages);\n      i0.ɵɵadvance(1);\n      i0.ɵɵclassProp(\"disabled\", ctx.currentPage === ctx.allPages.length);\n    }\n  },\n  dependencies: [i5.NgForOf, i5.NgIf, i2.RouterLink, i5.DatePipe],\n  styles: [\"@media (max-width: 768px) {\\r\\n  .review-text[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\\r\\n    max-width: 50%; \\r\\n    height: auto;\\r\\n  }\\r\\n}\\r\\n\\r\\nbody[_ngcontent-%COMP%] {\\r\\n  font-family: Arial, sans-serif;\\r\\n}\\r\\n\\r\\n\\r\\n.title[_ngcontent-%COMP%] {\\r\\n  font-size: 24px;\\r\\n  font-weight: bold;\\r\\n}\\r\\n\\r\\n\\r\\n.text-warning[_ngcontent-%COMP%] {\\r\\n  color: #ffc000;\\r\\n}\\r\\n\\r\\n.text-muted[_ngcontent-%COMP%] {\\r\\n  color: #6c757d;\\r\\n}\\r\\n\\r\\n.text-success[_ngcontent-%COMP%] {\\r\\n  color: #28a745;\\r\\n}\\r\\n\\r\\n\\r\\n.card[_ngcontent-%COMP%] {\\r\\n  border: none;\\r\\n}\\r\\n\\r\\n.info[_ngcontent-%COMP%] {\\r\\n  flex: 1;\\r\\n}\\r\\n\\r\\n\\r\\n.review[_ngcontent-%COMP%] {\\r\\n  margin-top: 20px;\\r\\n}\\r\\n\\r\\n.review[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%] {\\r\\n  border: none;\\r\\n}\\r\\n\\r\\n.review-text[_ngcontent-%COMP%] {\\r\\n  position: relative;\\r\\n}\\r\\n\\r\\n.review-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\r\\n  margin: 0;\\r\\n  padding-bottom: 5px;\\r\\n}\\r\\n\\r\\n.review-text[_ngcontent-%COMP%]   .text-warning[_ngcontent-%COMP%] {\\r\\n  margin-right: 5px;\\r\\n}\\r\\n\\r\\n.review-text[_ngcontent-%COMP%]   .fa-star[_ngcontent-%COMP%], .review-text[_ngcontent-%COMP%]   .fa-star-o[_ngcontent-%COMP%] {\\r\\n  font-size: 14px;\\r\\n}\\r\\n\\r\\n.review-text[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\\r\\n  height: 96px;\\r\\n  width: auto;\\r\\n  display: block;\\r\\n  margin: 10px auto;\\r\\n}\\r\\n\\r\\n.pagination[_ngcontent-%COMP%] {\\r\\n  margin-top: 20px;\\r\\n  text-align: center;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvQ29tcG9uZW50cy9wcm9kdWN0LWRldGFpbGVkL3Byb2R1Y3QtZGV0YWlsZWQuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFO0lBQ0UsY0FBYyxFQUFFLHFCQUFxQjtJQUNyQyxZQUFZO0VBQ2Q7QUFDRjtBQUNBLGtCQUFrQjtBQUNsQjtFQUNFLDhCQUE4QjtBQUNoQzs7QUFFQSw0QkFBNEI7QUFDNUI7RUFDRSxlQUFlO0VBQ2YsaUJBQWlCO0FBQ25COzs7QUFHQTtFQUNFLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSxjQUFjO0FBQ2hCOztBQUVBO0VBQ0UsY0FBYztBQUNoQjs7QUFFQSxpQ0FBaUM7QUFDakM7RUFDRSxZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxPQUFPO0FBQ1Q7O0FBRUEsNEJBQTRCO0FBQzVCO0VBQ0UsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0UsWUFBWTtBQUNkOztBQUVBO0VBQ0Usa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0UsU0FBUztFQUNULG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLGlCQUFpQjtBQUNuQjs7QUFFQTs7RUFFRSxlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsWUFBWTtFQUNaLFdBQVc7RUFDWCxjQUFjO0VBQ2QsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0UsZ0JBQWdCO0VBQ2hCLGtCQUFrQjtBQUNwQjs7QUFFQSxnQ0FBZ0M7QUFDaEMscUVBQXFFIiwic291cmNlc0NvbnRlbnQiOlsiQG1lZGlhIChtYXgtd2lkdGg6IDc2OHB4KSB7XHJcbiAgLnJldmlldy10ZXh0IGltZyB7XHJcbiAgICBtYXgtd2lkdGg6IDUwJTsgLyogQWRqdXN0IGFzIG5lZWRlZCAqL1xyXG4gICAgaGVpZ2h0OiBhdXRvO1xyXG4gIH1cclxufVxyXG4vKiBHbG9iYWwgc3R5bGVzICovXHJcbmJvZHkge1xyXG4gIGZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjtcclxufVxyXG5cclxuLyogUHJvZHVjdCBkZXRhaWxzIHNlY3Rpb24gKi9cclxuLnRpdGxlIHtcclxuICBmb250LXNpemU6IDI0cHg7XHJcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbn1cclxuXHJcblxyXG4udGV4dC13YXJuaW5nIHtcclxuICBjb2xvcjogI2ZmYzAwMDtcclxufVxyXG5cclxuLnRleHQtbXV0ZWQge1xyXG4gIGNvbG9yOiAjNmM3NTdkO1xyXG59XHJcblxyXG4udGV4dC1zdWNjZXNzIHtcclxuICBjb2xvcjogIzI4YTc0NTtcclxufVxyXG5cclxuLyogU2ltaWxhciBwcm9kdWN0IGl0ZW0gc2VjdGlvbiAqL1xyXG4uY2FyZCB7XHJcbiAgYm9yZGVyOiBub25lO1xyXG59XHJcblxyXG4uaW5mbyB7XHJcbiAgZmxleDogMTtcclxufVxyXG5cclxuLyogUHJvZHVjdCBSZXZpZXdzIHNlY3Rpb24gKi9cclxuLnJldmlldyB7XHJcbiAgbWFyZ2luLXRvcDogMjBweDtcclxufVxyXG5cclxuLnJldmlldyAuY2FyZCB7XHJcbiAgYm9yZGVyOiBub25lO1xyXG59XHJcblxyXG4ucmV2aWV3LXRleHQge1xyXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxufVxyXG5cclxuLnJldmlldy10ZXh0IHAge1xyXG4gIG1hcmdpbjogMDtcclxuICBwYWRkaW5nLWJvdHRvbTogNXB4O1xyXG59XHJcblxyXG4ucmV2aWV3LXRleHQgLnRleHQtd2FybmluZyB7XHJcbiAgbWFyZ2luLXJpZ2h0OiA1cHg7XHJcbn1cclxuXHJcbi5yZXZpZXctdGV4dCAuZmEtc3RhcixcclxuLnJldmlldy10ZXh0IC5mYS1zdGFyLW8ge1xyXG4gIGZvbnQtc2l6ZTogMTRweDtcclxufVxyXG5cclxuLnJldmlldy10ZXh0IGltZyB7XHJcbiAgaGVpZ2h0OiA5NnB4O1xyXG4gIHdpZHRoOiBhdXRvO1xyXG4gIGRpc3BsYXk6IGJsb2NrO1xyXG4gIG1hcmdpbjogMTBweCBhdXRvO1xyXG59XHJcblxyXG4ucGFnaW5hdGlvbiB7XHJcbiAgbWFyZ2luLXRvcDogMjBweDtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbn1cclxuXHJcbi8qIEFkZCBhZGRpdGlvbmFsIHN0eWxlcyBiZWxvdyAqL1xyXG4vKiBBZGQgeW91ciBjdXN0b20gc3R5bGVzIGZvciBvdGhlciBzZWN0aW9ucyBhbmQgZWxlbWVudHMgYXMgbmVlZGVkICovXHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});\nfunction showAlert() {\n  throw new Error('Function not implemented.');\n}","map":{"version":3,"mappings":"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","names":["Swal","i0","ProductDetailedComponent","constructor","productService","activate","reviewService","shoppingCartService","router","ngOnInit","getAllReviewsAndLimitPages","productId","snapshot","paramMap","get","getReviewByProductId","getProductByID","subscribe","res","productData","console","log","localStorage","setItem","JSON","stringify","productDataJson","getItem","parse","categoryValue","product_category","searchByCategory","similarProducts","reviewList","reviewLists","content","pageNumbers","i","totalPages","push","allPages","selectedValue","value","Math","ceil","reviewData","length","reviewsPerPage","pagedReviews","startIndex","currentPage","endIndex","slice","changePage","page","limitedItems","getReviewById","newData","createReview","data","productReview","image","addReview","addToCart","existingCartDataJson","cartData","existingProductIndex","findIndex","item","product_id","INITIAL_PRODUCT_QUANTITY","newCartItem","cartId","userId","productName","product_name","cartTotalPrice","product_discount_price","productImage","product_image","productPrice","productQuantity","fire","title","text","icon","confirmButtonText","navigate","selectors","decls","vars","consts","template","ctx","showAlert","Error"],"sourceRoot":"","sources":["C:\\Users\\KIIT\\Desktop\\CapstoneDemoV3\\shop-smartly\\product-webapp\\webapp\\src\\app\\Components\\product-detailed\\product-detailed.component.ts","C:\\Users\\KIIT\\Desktop\\CapstoneDemoV3\\shop-smartly\\product-webapp\\webapp\\src\\app\\Components\\product-detailed\\product-detailed.component.html"],"sourcesContent":["import { ProductService } from 'src/app/Services/product.service';\r\nimport { ReviewService } from 'src/app/Services/review.service';\r\nimport { Product, Review } from 'src/app/data.types';\r\nimport { Router, Params, ActivatedRoute } from '@angular/router';\r\nimport { FormGroup } from '@angular/forms';\r\nimport { ShoppingCartItem } from 'src/app/cartModel';\r\nimport { ShoppingCartService } from 'src/app/Services/shopping-cart.service';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport Swal from 'sweetalert2';\r\n@Component({\r\n  selector: 'app-product-detailed',\r\n  templateUrl: './product-detailed.component.html',\r\n  styleUrls: ['./product-detailed.component.css'],\r\n})\r\nexport class ProductDetailedComponent implements OnInit {\r\n  productData!: Product;\r\n  similarProducts!: Product[];\r\n  categoryValue: string | null = null;\r\n  reviewLists!: Review;\r\n  reviewData!: Review[];\r\n  reviewForm!: FormGroup;\r\n  items: any[] = [];\r\n  allPages: any[] = [];\r\n  cartTotalPrice !: number;\r\n  INITIAL_PRODUCT_QUANTITY = 1; \r\n  constructor(\r\n    private productService: ProductService,\r\n    private activate: ActivatedRoute,\r\n    private reviewService: ReviewService,\r\n    private shoppingCartService : ShoppingCartService,\r\n    private router : Router\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.getAllReviewsAndLimitPages();\r\n    let productId = this.activate.snapshot.paramMap.get('productId');\r\n    this.getReviewByProductId(productId);\r\n\r\n    productId &&\r\n      this.productService.getProductByID(productId).subscribe((res) => {\r\n        this.productData = res;\r\n        console.log(this.productData);\r\n        localStorage.setItem('localCart', JSON.stringify([this.productData]));\r\n      });\r\n    const productDataJson = localStorage.getItem('localCart');\r\n\r\n    if (productDataJson) {\r\n      const productData = JSON.parse(productDataJson);\r\n      this.categoryValue = productData[0].product_category;\r\n      console.log(this.categoryValue); // Output: Mobile\r\n    } else {\r\n      console.log('No product data found in local storage.');\r\n    }\r\n    this.productService\r\n      .searchByCategory(this.categoryValue)\r\n      .subscribe((res) => {\r\n        this.similarProducts = res;\r\n      });\r\n        // Reload the window after the specified delay\r\n  }\r\n\r\n\r\n  getAllReviewsAndLimitPages() {\r\n    this.reviewService.reviewList().subscribe((res: any) => {\r\n      this.reviewLists = res.content;\r\n      console.log(this.reviewLists);\r\n      let pageNumbers: any = [];\r\n      for (let i = 1; i <= this.totalPages; i++) {\r\n        pageNumbers.push(i);\r\n      }\r\n      this.allPages = pageNumbers;\r\n\r\n    });\r\n  }\r\n  // get review for productId\r\n\r\n  value = '';\r\n\r\n  selectedValue(value: any): void {\r\n    console.log('value', value);\r\n    this.value = value;\r\n  }\r\n\r\n\r\n  reviewsPerPage: number = 4; // Number of reviews per page\r\n  currentPage: number = 1;\r\n\r\n  // Calculate the total number of pages\r\n  get totalPages(): number {\r\n    return Math.ceil(this.reviewData.length / this.reviewsPerPage);\r\n  }\r\n\r\n  // Get the array of reviews for the current page\r\n  get pagedReviews(): any[] {\r\n    const startIndex = (this.currentPage - 1) * this.reviewsPerPage;\r\n    const endIndex = startIndex + this.reviewsPerPage;\r\n    return this.reviewData.slice(startIndex, endIndex);\r\n  }\r\n\r\n\r\n  limitedItems: any[] = [];\r\n  // Change the current page and update the displayed reviews\r\n  changePage(page: number): void {\r\n    if (page >= 1 && page <= this.totalPages) {\r\n      this.currentPage = page;\r\n      this.limitedItems = this.pagedReviews;\r\n      console.log(this.pagedReviews, ' this is paged reviews');\r\n    }\r\n  }\r\n  getReviewByProductId(productId: any) {\r\n    this.reviewService.getReviewById(productId).subscribe((res: any) => {\r\n      this.reviewData = res;\r\n      let newData = this.reviewData;\r\n      newData = this.pagedReviews;\r\n      this.limitedItems = this.pagedReviews;\r\n      console.log(this.limitedItems, ' limiteditems');\r\n    });\r\n  }\r\n  createReview() {\r\n    const data = {\r\n      productReview: {\r\n\r\n      },\r\n      image: '',\r\n    };\r\n    // this.reviewService\r\n    //   .postReview(data.productReview, data.image)\r\n    //   .subscribe((res) => {\r\n    //     console.log(res);\r\n    //   });\r\n  }\r\n  addReview(data: any) {\r\n    console.log(data)\r\n    let newData = JSON.stringify(data)\r\n    console.log(newData);\r\n  }\r\n\r\n\r\n  // +++++++++++++++++++++++++++++++++++++++ Add to Cart\r\n// Global initial value for product quantity\r\n\r\naddToCart() {\r\n  const productDataJson = localStorage.getItem('localCart');\r\n\r\n  if (productDataJson) {\r\n    const productData = JSON.parse(productDataJson);\r\n    const existingCartDataJson = localStorage.getItem('cartList');\r\n    let cartData: ShoppingCartItem[] = []; // Explicitly define the type\r\n\r\n    if (existingCartDataJson) {\r\n      cartData = JSON.parse(existingCartDataJson) as ShoppingCartItem[]; // Cast the parsed JSON to the expected type\r\n      const existingProductIndex = cartData.findIndex(item => item.productId === productData[0].product_id);\r\n\r\n      if (existingProductIndex !== -1) {\r\n        // Product already exists in the cart, increase the quantity\r\n        this.INITIAL_PRODUCT_QUANTITY += 1;\r\n      } else {\r\n        // Product doesn't exist in the cart, add it\r\n        const newCartItem: ShoppingCartItem = {\r\n          cartId: 21,\r\n          userId: 12,\r\n          productId: productData[0].product_id,\r\n          productName: productData[0].product_name,\r\n          cartTotalPrice: productData[0].product_discount_price,\r\n          productImage: productData[0].product_image,\r\n          productPrice: productData[0].product_discount_price,\r\n          productQuantity: this.INITIAL_PRODUCT_QUANTITY, // Use the global initial value\r\n        };\r\n        cartData.push(newCartItem);\r\n        this.shoppingCartService.addToCart(newCartItem).subscribe((res) => {\r\n          // Handle the response if needed\r\n        });\r\n      }\r\n    } else {\r\n      // Cart is empty, add the product directly\r\n      const newCartItem: ShoppingCartItem = {\r\n        cartId: 21,\r\n        userId: 12,\r\n        productId: productData[0].product_id,\r\n        productName: productData[0].product_name,\r\n        cartTotalPrice: productData[0].product_discount_price,\r\n        productImage: productData[0].product_image,\r\n        productPrice: productData[0].product_discount_price,\r\n        productQuantity: this.INITIAL_PRODUCT_QUANTITY, // Use the global initial value\r\n      };\r\n      cartData.push(newCartItem);\r\n      this.shoppingCartService.addToCart(newCartItem).subscribe((res) => {\r\n        // Handle the response if needed\r\n      });\r\n    }\r\n\r\n    localStorage.setItem('cartList', JSON.stringify(cartData));\r\n\r\n    Swal.fire({\r\n      title: 'Added In Your Cart',\r\n      text: 'Product Added in Your Cart',\r\n      icon: 'success',\r\n      confirmButtonText: 'Okay'\r\n    });\r\n\r\n    this.router.navigate(['/mycart']);\r\n  }\r\n}\r\n\r\n  \r\n  \r\n\r\n  // total() {\r\n  //   this.shoppingCartService.calculateGrandTotal()\r\n  // }\r\n\r\n\r\n}\r\nfunction showAlert() {\r\n  throw new Error('Function not implemented.');\r\n}\r\n\r\n","<section class=\"py-5\">\r\n  <div class=\"container\">\r\n    <div class=\"row gx-5\" *ngIf=\"productData\">\r\n      <aside class=\"col-lg-6\">\r\n        <div class=\"border rounded-4 mb-3 d-flex justify-content-center\">\r\n          <a data-fslightbox=\"mygalley\" class=\"rounded-4\" target=\"_blank\" data-type=\"image\"\r\n            href=\"assets/images/pexels-pixabay-51383.jpg\">\r\n            <img style=\"max-width: 100%; max-height: 50vh; margin: auto\" class=\"rounded-4 fit\"\r\n              [src]=\"'data:image/jpeg;base64,' + productData.product_image\" />\r\n          </a>\r\n        </div>\r\n      </aside>\r\n      <main class=\"col-lg-6\">\r\n        <div class=\"ps-lg-3\">\r\n          <h4 class=\"title text-dark\">\r\n            {{ productData.product_name }}\r\n          </h4>\r\n          <div class=\"d-flex flex-row my-3\">\r\n            <div class=\"text-warning mb-1 me-2\">\r\n              <i class=\"fa fa-star\"></i>\r\n              <i class=\"fa fa-star\"></i>\r\n              <i class=\"fa fa-star\"></i>\r\n              <i class=\"fa fa-star\"></i>\r\n              <i class=\"fas fa-star-half-alt\"></i>\r\n              <span class=\"ms-1\"> 4.5 </span>\r\n            </div>\r\n            <span class=\"text-muted\"><i class=\"fas fa-shopping-basket fa-sm mx-1\"></i>154 orders</span>\r\n            <span class=\"text-success ms-2\">{{\r\n              productData.product_status\r\n              }}</span>\r\n          </div>\r\n\r\n          <div class=\"mb-3\">\r\n            <span><i class=\"fa fa-doller\"></i>\r\n              <del>${{ productData.product_current_price }}</del>\r\n              <b> ${{ productData.product_discount_price }}</b>\r\n            </span>\r\n            <!-- <span class=\"text-muted\">/per box</span> -->\r\n          </div>\r\n          <p>\r\n            {{ productData.product_description }}\r\n          </p>\r\n          <hr />\r\n          <div class=\"d-grid gap-2\">\r\n            <button class=\"btn btn-primary\" style=\"background-color: #4682A9;\" (click)=\"addToCart()\" type=\"button\">Add to cart</button>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  </div>\r\n</section>\r\n<!-- content -->\r\n\r\n<!--  similar product item -->\r\n<section class=\"bg-light border-top py-4\">\r\n  <div class=\"container\">\r\n    <div class=\"col-lg-12\">\r\n      <div class=\"px-0 border rounded-2 shadow-0\">\r\n        <div class=\"card\">\r\n          <div class=\"card-body\">\r\n            <h5 class=\"card-title\">Similar items</h5>\r\n            <div class=\"row\">\r\n              <div class=\"col-md-6 mb-3\" *ngFor=\"let item of similarProducts\">\r\n                <div class=\"d-flex\">\r\n                  <a href=\"#\" class=\"me-3\">\r\n                    <img [src]=\"'data:image/jpeg;base64,' + item.product_image\" style=\"min-width: 96px; height: 96px\"\r\n                      class=\"img-md img-thumbnail\" />\r\n                  </a>\r\n                  <div class=\"info\">\r\n                    <a routerLink=\"'/details/{{ item.product_id }}\" class=\"nav-link mb-1\">\r\n                      {{ item.product_name }}\r\n                    </a>\r\n                    <strong class=\"text-dark\">\r\n                      <span><i class=\"fa fa-doller\"></i>\r\n                        <del>${{ item.product_current_price }}</del>\r\n                        <b> ${{ item.product_discount_price }}</b>\r\n                      </span></strong>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</section>\r\n<!--  similar product item -->\r\n\r\n<section class=\"bg-light py-4\">\r\n  <div class=\"container\">\r\n    <div class=\"row\">\r\n      <div class=\"col-lg-12\">\r\n        <h2 class=\"text-dark\">Product Reviews</h2>\r\n        <hr />\r\n\r\n\r\n        <!-- List of Reviews -->\r\n        <div class=\"review\">\r\n          <!-- Loop through the reviews array and display each review -->\r\n          <div *ngFor=\"let item of this.limitedItems\" class=\"card mb-3\">\r\n            <div class=\"card-body d-flex align-items-center justify-content-between\">\r\n\r\n              <div class=\"review-text\">\r\n                <p>\r\n                  <b>-{{ item.user_name }}</b>\r\n                </p>\r\n                <div class=\"text-warning me-2\">\r\n                  <!-- You can create a function to generate stars based on rating -->\r\n                  <i *ngFor=\"let _ of [1, 2, 3, 4, 5]; let i = index\" [class]=\"\r\n                        i + 1 <= item.product_review_rating\r\n                          ? 'fa fa-star'\r\n                          : 'fa fa-star-o'\r\n                      \"></i>\r\n                </div>\r\n                <p class=\"mb-0\">{{ item.product_review_description }}</p>\r\n                <p class=\"text-muted mb-0\">\r\n                  Posted date: {{ item.posted_date | date : \"MMMM d, y\" }}\r\n                </p>\r\n\r\n                <img\r\n                [src]=\"'data:image/jpeg;base64,' + item.product_image\"\r\n                  style=\"min-width: 96px; height: 96px\"\r\n                  class=\"img-md img-thumbnail\"\r\n                />\r\n\r\n              </div>\r\n\r\n\r\n\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Add more reviews as needed -->\r\n        </div>\r\n     \r\n\r\n\r\n\r\n        <!-- Pagination -->\r\n        <!-- Pagination controls -->\r\n        <nav aria-label=\"Review pagination\">\r\n          <ul class=\"pagination justify-content-center\">\r\n            <li class=\"page-item\" [class.disabled]=\"currentPage === 1\">\r\n              <a class=\"page-link\" href=\"javascript:void(0);\" (click)=\"changePage(currentPage - 1)\">Previous</a>\r\n            </li>\r\n            <li class=\"page-item\" *ngFor=\"let page of allPages\" [class.active]=\"page === this.currentPage\">\r\n              <a class=\"page-link\" href=\"javascript:void(0);\" (click)=\"changePage(page)\">{{ page }}</a>\r\n                        \r\n            </li>\r\n            <li class=\"page-item\" [class.disabled]=\"currentPage === this.allPages.length\">\r\n              <a class=\"page-link\" href=\"javascript:void(0);\" (click)=\"changePage(currentPage + 1)\">Next</a>\r\n            </li>\r\n          </ul>\r\n        </nav>\r\n        <!-- End of Pagination -->\r\n\r\n\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n</section>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}
